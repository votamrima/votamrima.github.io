---
layout: single
title: "Multi-NIC Linux Host. Fixing DNS resolution via second interface."
subtitle: ""
date: 2026-01-12 22:00:00 +0100
background: '/image/01.jpg'
tags: ['linux']
categories:
  - Linux
---

{% raw %}

## Problem

A Linux host has two network interfaces:

- `ens18` — NAT / external network (injects wrong DNS)
- `ens19` — internal lab network with Windows DNS (`192.168.11.13`)

By default, Linux resolves DNS queries via `ens18`.  
DNS resolution must instead go through `ens19`.


### Current Network State

````bash
nmcli con show
NAME   UUID                                  TYPE      DEVICE
ens18  5f23ffe2-a33c-3dc1-8796-c1e30bc755de  ethernet  ens18
ens19  3258c998-81e0-3279-b446-e18ab3125642  ethernet  ens19
lo     7b3d1d8c-1e55-4395-b981-682a96b5ac72  loopback  lo
````


````bash
nslookup aap-server.home.lab
````

````bash
Server: 192.168.241.2
** server can't find aap-server.home.lab: NXDOMAIN

````

````bash
nslookup 192.168.11.55
````

**Solution 1:**
Force DNS resolution via the ens19 ``interface`` and disable DNS on the ``ens18``.

Disable DNS on the ``ens18``

````bash
[root@aap ~]# nmcli con mod ens18 ipv4.ignore-auto-dns yes
[root@aap ~]# nmcli con mod ens18 ipv4.dns ""
````

Enable DNS on the ``ens19``

````bash
[root@aap ~]# nmcli con mod ens19 ipv4.dns "192.168.11.13"
[root@aap ~]# nmcli con mod ens19 ipv4.dns-search "home.lab"
[root@aap ~]# nmcli con mod ens19 ipv4.ignore-auto-dns yes
````

Restart network connections

````bash
[root@aap ~]# nmcli con down ens18 && nmcli con up ens18
Connection 'ens18' successfully deactivated
Connection successfully activated

[root@aap ~]# nmcli con down ens19 && nmcli con up ens19
Connection 'ens19' successfully deactivated
Connection successfully activated
````

### Check Results:

Check ``resolv.conf`` file

````bash
[root@aap ~]# cat /etc/resolv.conf
# Generated by NetworkManager
search home.lab
nameserver 192.168.11.13
[root@aap ~]#
````

Check using nslookup command:

````bash
[root@aap ~]# nslookup aap-server
Server:         192.168.11.13
Address:        192.168.11.13#53

Name:   aap-server.home.lab
Address: 192.168.11.55

[root@aap ~]# nslookup aap-server.home.lab
Server:         192.168.11.13
Address:        192.168.11.13#53

Name:   aap-server.home.lab
Address: 192.168.11.55
[root@aap ~]# 
````




{% endraw %}
